{% extends 'base.html' %}

{% block content %}

<h2 class="mb-4">{{ category.name }}</h2>

<!-- FILTER -->
<div class="card shadow-sm mb-4">
    <div class="card-body">
        <form method="get" class="row g-3 align-items-end">

            <div class="col-md-4">
                <label class="form-label">Search</label>
                <input type="text"
                       name="q"
                       class="form-control"
                       value="{{ query|default:'' }}">
            </div>

            <div class="col-md-3">
                <label class="form-label">Min Price</label>
                <input type="number"
                       name="min_price"
                       class="form-control"
                       value="{{ min_price }}">
            </div>

            <div class="col-md-3">
                <label class="form-label">Max Price</label>
                <input type="number"
                       name="max_price"
                       class="form-control"
                       value="{{ max_price }}">
            </div>

            <div class="col-md-2 d-flex gap-2">
                <button class="btn btn-dark w-100">
                    Filter
                </button>

                {% if query or min_price or max_price %}
                <a href="{% url 'store:category_products' category.slug %}"
                   class="btn btn-outline-secondary w-100">
                    Clear
                </a>
                {% endif %}
            </div>

        </form>
    </div>
</div>

<!-- PRODUCTS -->
<div class="row">
{% for product in products %}
    <div class="col-md-4 mb-4">
        <div class="card h-100 shadow-sm card-hover">
            <img src="{{ product.image.url }}"
                 class="card-img-top"
                 style="height:220px;object-fit:cover;">
            <div class="card-body">
                <h5>{{ product.name }}</h5>
                <p class="text-muted">â‚¹ {{ product.price }}</p>
                <a href="{% url 'store:product_detail' product.id %}"
                   class="btn btn-dark w-100">
                    View Product
                </a>
            </div>
        </div>
    </div>
{% empty %}
    <div class="col-12">
        <div class="alert alert-info">
            No products found in this range.
        </div>
    </div>
{% endfor %}
</div>

{% endblock %}
